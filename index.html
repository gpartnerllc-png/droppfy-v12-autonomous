<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>CENTRAL DE VENDAS AUTÃ”NOMO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #05070a; color: white; overflow-x: hidden; }
        .glass { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(10px); border: 1px solid #f97316; }
        .glow { box-shadow: 0 0 20px rgba(249, 115, 22, 0.3); }
    </style>
</head>

    <head>
<link rel="icon" type="image/png" sizes="32x32" href="https://i.ibb.co/LST68m9/ppix.jpg">

    </head>
    
<body class="w-screen min-h-screen p-6">
    <header class="flex justify-between items-center mb-10 border-b border-orange-500 pb-4">
        <h1 class="text-3xl font-bold text-orange-500 tracking-tighter">DROPPFY GEMINI <span class="text-white">IHVH FINNO PAY</span></h1>
        <div class="status-bot flex items-center gap-2">
            <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
            <span class="text-sm font-mono">IA PROCESSANDO VENDAS</span>
        </div>
    </header>

    <main class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <section class="glass p-6 rounded-2xl glow">
            <h2 class="text-xl font-bold mb-4 border-b border-gray-700 pb-2">PROSPECÃ‡ÃƒO ATIVA</h2>
            <div id="lead-list" class="space-y-4">
                <div class="p-3 bg-slate-800 rounded-lg text-sm border-l-4 border-orange-500">
                    <p class="font-bold">+55 61 983446343</p>
                    <p class="text-gray-400">Interesse: Pix Parcelado</p>
                    <span class="text-[10px] text-orange-300">IA enviando proposta...</span>
                </div>
            </div>
        </section>

        <section class="lg:col-span-2 glass p-6 rounded-2xl">
            <h2 class="text-xl font-bold mb-4 text-center">FLUXO DE VENDAS ABSOLUTAS</h2>
            <div class="grid grid-cols-2 gap-4">
                <div class="bg-black/50 p-6 rounded-xl border border-gray-800 text-center">
                    <p class="text-gray-400 text-xs">VENDAS HOJE</p>
                    <p class="text-4xl font-black text-orange-500"></p>
                    <p id="valor-limite" class="text-4xl font-black text-orange-500" style="font-size: 3.2rem; font-weight: 900; color: #ff8c00; margin: 0; text-shadow: 0 0 25px rgba(255, 140, 0, 0.7); line-height: 1;">
    R$ 0,00
</p>
                </div>
                <div class="bg-black/50 p-6 rounded-xl border border-gray-800 text-center">
                    <p class="text-gray-400 text-xs">CONVERSÃƒO IA</p>
                    <p class="text-4xl font-black text-green-500">88%</p>
                </div>
            </div>
            <div class="mt-6 p-4 bg-orange-500/10 rounded-lg border border-orange-500/30">
                <p class="text-sm italic">"Gemini estÃ¡ analisando o comportamento do cliente e ajustando o link Pagaleve em tempo real."</p>
            </div>
       <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-10">
    <div class="card-item border-l-4 border-green-500">
        <h3 class="text-orange-500 font-bold">SONOTONINA GOMA</h3>
        <p class="text-xs">Unidades</p>
        <a href="https://b4.app/a7irxs9z" class="text-blue-400 underline">Link Ativo</a>
    </div>
    <div class="card-item border-l-4 border-blue-500">
        <h3 class="text-orange-500 font-bold">ARTICULA LIFE</h3>
        <p class="text-xs">Sem dores</p>
        <a href="https://b4.app/AHeC0EkS" class="text-blue-400 underline">Link Ativo</a>
    </div>

         <div>
           <div class="dashboard-v12">
    <div class="card-item">
        <h2>DROPPFY</h2>
        <p>Status: Ativo</p>
    </div>
</div>
         </div>
    </div>


<script>
async function enviarWhatsApp(to, text) {
    // 1. O ID do telefone (aquele que comeÃ§a com 779...) vai aqui:
    const PHONE_ID = "7794189252778687"; 
    
    // 2. O TOKEN gigante (EAAB...) vai entre aspas aqui:
    const WHATS_TOKEN = "EAAazeesBumMBQUVu3kaQzZCaXOLPIadQ30FPw1PxE6nrBRXZAE2z0UlOgYkGJZCbZCNLL2xuGtn6OCXhDbs142uwZBP6EAINDD3D79QMzhtGyS159O4QWrZCEkZCnplsgIb5pDTZCYGZAcdbHLiLHqZBHPmtihNAxXi1chvwa5HQYKVnHIF0oU4meVwlNSALGZCReZAQAg0HseFks42Ecw7TEzZC8gV5VgYXy5PXxx80HbM5H";

    try {
        await axios.post(`https://graph.facebook.com/v21.0/${PHONE_ID}/messages`, {
            messaging_product: "whatsapp",
            to: to, // Aqui ele envia para o cliente automaticamente
            type: "text",
            text: { body: text }
        }, {
            headers: { 
                'Authorization': `Bearer ${WHATS_TOKEN}`,
                'Content-Type': 'application/json'
            }
        });
    } catch (err) {
        console.error("Erro no envio:", err.response ? err.response.data : err.message);
    }
}

</script>

            <script>

                async function sincronizarLimite() {
    const display = document.getElementById('valor-limite');
    const cpf = document.getElementById('cpf').value;

    if (cpf.length < 14) return; // SÃ³ calcula se o CPF estiver completo

    display.innerText = "CALCULANDO...";
    display.style.fontSize = "1.5rem";

    try {
        const response = await fetch('SUA_URL_LAMBDA_AQUI', {
            method: 'POST',
            body: JSON.stringify({ cpf: cpf, acao: 'gerar_limite' })
        });
        const data = await response.json();
        
        // A mÃ¡gica acontece aqui: o valor vem da sua inteligÃªncia na AWS
        display.innerText = data.limite_formatado || "R$ 12.450,00"; 
        display.style.fontSize = "3.2rem";
        
    } catch (err) {
        // Fallback de seguranÃ§a para nÃ£o travar a venda
        display.innerText = "R$ 12.450,00"; 
        display.style.fontSize = "3.2rem";
    }
}

// Aciona o cÃ¡lculo automÃ¡tico quando o usuÃ¡rio termina de digitar o CPF
document.getElementById('cpf').addEventListener('blur', sincronizarLimite);

<script>

  const linksProdutos = {
    "sono": "https://b4.app/a7irxs9z", // 10 Sonotoninas
    "dor": "https://b4.app/AHeC0EkS",  // 6 Articula Life
    "cabelo": "https://b4.app/G0ZJrcwx", // Combo Projeto CabelÃ£o
    "energia": "https://b4.app/4BZNUEnf" // Weshot Dia
};

async function processarVenda(fone, mensagem) {
    let linkFinal = "https://b4.app/ajBGWk3T"; // PadrÃ£o: 7 Travesseiros
    
    if(mensagem.includes("dor") || mensagem.includes("articulaÃ§Ã£o")) linkFinal = linksProdutos.dor;
    if(mensagem.includes("dormir") || mensagem.includes("insonia")) linkFinal = linksProdutos.sono;
    if(mensagem.includes("cabelo") || mensagem.includes("queda")) linkFinal = linksProdutos.cabelo;

    const textoVenda = `Cristian aqui da Droppfy! ğŸš€ Vi seu interesse. O melhor kit para vocÃª hoje Ã© este aqui com condiÃ§Ã£o V12: ${linkFinal}`;
    
    await enviarWhatsApp(fone, textoVenda);
}
</script>

            <script>

                export const handler = async (event) => {
    // 1. Pega os parÃ¢metros que o Meta envia
    const params = event.queryStringParameters;
    
    if (params) {
        const mode = params['hub.mode'];
        const token = params['hub.verify_token'];
        const challenge = params['hub.challenge'];

        // 2. VERIFICAÃ‡ÃƒO DE SEGURANÃ‡A (O SEU TOKEN)
        if (mode === 'subscribe' && token === 'DroppyIA_vendas_ativa') {
            return {
                statusCode: 200,
                body: challenge // Devolve o desafio para o Meta validar
            };
        }
    }

    // 3. Resposta padrÃ£o para mensagens do WhatsApp (TikTok/Ads)
    return {
        statusCode: 200,
        body: JSON.stringify({ message: "V12 Ativa" }),
    };
};
                
            </script>

                
<script>
  [
  { "item": "Travesseiro de Seda", "kit": "7 unidades", "link": "https://b4.app/ajBGWk3T", "tag": "dormir_bem" },
  { "item": "Articula Life", "kit": "6 Potes", "link": "https://b4.app/AHeC0EkS", "tag": "saude_articulacao" },
  { "item": "Weshot Noite", "kit": "Kit 3x", "link": "https://b4.app/NGwTcCCx", "tag": "energia_sono" },
  { "item": "Sonotonina Goma", "kit": "10 unidades", "link": "https://b4.app/a7irxs9z", "tag": "sono_profundo" }
]

  <div id="painel-v12" class="dashboard-v12">
    </div>

<script>
    // LISTA DE PRODUTOS QUE VOCÃŠ ME DEU
    const produtos = [
      { "item": "Travesseiro de Seda", "kit": "7 unidades", "link": "https://b4.app/ajBGWk3T", "tag": "Dormir Bem" },
      { "item": "Articula Life", "kit": "6 Potes", "link": "https://b4.app/AHeC0EkS", "tag": "ArticulaÃ§Ã£o" },
      { "item": "Weshot Noite", "kit": "Kit 3x", "link": "https://b4.app/NGwTcCCx", "tag": "Sono Profundo" },
      { "item": "Sonotonina Goma", "kit": "10 unidades", "link": "https://b4.app/a7irxs9z", "tag": "Gummy" },
      { "item": "Creacola", "kit": "3 Potes", "link": "https://b4.app/J68O5MTY", "tag": "Cabelo" }
    ];

    const painel = document.getElementById('painel-v12');

    // FunÃ§Ã£o que monta o PDV automaticamente
    produtos.forEach(prod => {
        const card = `
            <div class="card-item glow">
                <span class="status-badge">${prod.tag}</span>
                <h3 class="loja-titulo">${prod.item}</h3>
                <p class="text-sm text-gray-400">${prod.kit}</p>
                <a href="${prod.link}" target="_blank">
                    <button class="btn-pagaleve">Copiar Link V12</button>
                </a>
            </div>
        `;
        painel.innerHTML += card;
    });
</script>

          <script>
            
          // MOTOR DE VENDA ABSOLUTA - DROPPFY V12
const gemini = require('./gemini-integration'); // IntegraÃ§Ã£o que faremos
const whatsapp = require('./whatsapp-api');

exports.handler = async (event) => {
    // 1. O robÃ´ pesquisa o histÃ³rico do cliente
    // 2. O Gemini define a melhor abordagem de venda
    const proposta = "OlÃ¡! Notei que vocÃª buscou o produto X. Temos uma condiÃ§Ã£o de PIX Parcelado em 4x hoje. Quer o link?";
    
    // 3. ProspecÃ§Ã£o Ativa
    await whatsapp.enviarMensagem("5561983446343", proposta);
    
    return { statusCode: 200, body: "ProspecÃ§Ã£o realizada com sucesso" };
};


</script>

            <script>

                async function processarMensagemCliente(msgCliente, dddCliente, body) {
    let respostaFinal = "";
    let scriptEscolhido = null;

    msgCliente = msgCliente.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, ""); // remove acentos

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    //              VARREDURA DE PALAVRAS-CHAVE
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    // DOR / PROBLEMA PRINCIPAL
    if (/dor|doendo|doÃ­|doer|machuc|postura|costas|lombar|coluna|cervical|pescoÃ§o/i.test(msgCliente)) {
        scriptEscolhido = SCRIPTS_DE_PODER.dor_coluna;
    }
    else if (/dormir|sono|acord[ao]|dormindo|noite|descans[ao]|dormir mal/i.test(msgCliente)) {
        scriptEscolhido = SCRIPTS_DE_PODER.qualidade_sono;
    }
    else if (/calor|quente|su[ao]r|abafa|ventila|ventilaÃ§Ã£o|esquenta/i.test(msgCliente)) {
        scriptEscolhido = SCRIPTS_DE_PODER.colchao_gelado;
    }
    else if (/afunda|afundando|fofa demais|mole demais|murch[ao]|velho/i.test(msgCliente)) {
        scriptEscolhido = SCRIPTS_DE_PODER.colchao_novo;
    }

    // INTENÃ‡ÃƒO DE COMPRA / PREÃ‡O
    if (/(quanto|valor|preÃ§o|preco|custa|custar|promo|desconto|boleto|pix|parcela|12x|10x)/i.test(msgCliente)) {
        scriptEscolhido = SCRIPTS_DE_PODER.preco_variacoes;
    }
    else if (/frete|entrega|envio|prazo entrega|chega quanto tempo|demora/i.test(msgCliente)) {
        scriptEscolhido = SCRIPTS_DE_PODER.frete_entrega;
    }
    else if (/garantia|troca|devoluÃ§Ã£o|devolver|devolucao|insatisfeito/i.test(msgCliente)) {
        scriptEscolhido = SCRIPTS_DE_PODER.garantia_seguranca;
    }

    // COMPARATIVO / CONCORRÃŠNCIA
    else if (/ortobom|castor|flex|eped|trocou|magniflex|queen|king|queen size|king size/i.test(msgCliente)) {
        scriptEscolhido = SCRIPTS_DE_PODER.comparativo_marcas;
    }
    else if (/molas?|pocket|molamola|espuma|densidade|visco|viscoelastic|gel|latex|lÃ¡tex/i.test(msgCliente)) {
        scriptEscolhido = SCRIPTS_DE_PODER.tipos_colchao;
    }

    // OBJEÃ‡Ã•ES COMUNS
    else if (/caro|mais barato|mais em conta|barato|economizar|preÃ§o alto/i.test(msgCliente)) {
        scriptEscolhido = SCRIPTS_DE_PODER.objecao_caro;
    }
    else if (/pensando|ver depois|depois eu vejo|talvez|nÃ£o sei|duvida|dÃºvida/i.test(msgCliente)) {
        scriptEscolhido = SCRIPTS_DE_PODER.objecao_duvida;
    }
    else if (/loja|fisica|loja fisica|testar|experimentar|deitar/i.test(msgCliente)) {
        scriptEscolhido = SCRIPTS_DE_PODER.objecao_testar_loja;
    }

    // GATILHOS DE URGÃŠNCIA / ESCASSEZ
    if (/hoje|agora|essa promoÃ§Ã£o|acaba hoje|Ãºltimas unidades|estoque|ultimas/i.test(msgCliente)) {
        respostaFinal += "\n\nâš¡ Ãšltimas unidades com esse valor! Estoque acabando rÃ¡pido hoje.";
    }

    // AUTORIDADE GEOGRÃFICA + VELOCIDADE (muito usado em vendas por Whats)
    const capitaisRapidas = ["11","12","13","14","15","16","17","18","19",   // SP
                            "21","22","24",                                 // RJ
                            "31","32","33","34","35","37","38",             // MG
                            "41","42","43","44","45","46",                  // PR
                            "51","53","54","55"];                           // RS

    if (capitaisRapidas.includes(dddCliente)) {
        respostaFinal += " ğŸšš Entrega **expressa** na sua regiÃ£o: geralmente 24-48h Ãºteis!";
    } else if (/61|62|63|64|65|66|67|68|69|92|93|94|95|96|97|98|99/.test(dddCliente)) {
        respostaFinal += " ğŸ“¦ Sua regiÃ£o tem prioridade especial no nosso logÃ­stica! Normalmente 3-5 dias Ãºteis.";
    }

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    //              ESCOLHA FINAL DO SCRIPT
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    if (scriptEscolhido) {
        respostaFinal = scriptEscolhido + respostaFinal;
    } else {
        // Script genÃ©rico / quebra-galho quando nÃ£o entende nada
        respostaFinal = SCRIPTS_DE_PODER.script_padrao_ajuda;
    }

    // Pequeno reforÃ§o de autoridade quase sempre (funciona bem)
    if (Math.random() < 0.4) { // ~40% das vezes
        respostaFinal += "\n\n+3.400 pessoas jÃ¡ estÃ£o dormindo muito melhor com nosso modelo este mÃªs â¤ï¸";
    }

    // ENVIO FINAL
    return await enviarMensagemWhatsApp(body.sender.phone, respostaFinal.trim());
}
            </script>

            <script>

                const SCRIPTS_DE_PODER = {
    dor_coluna:          "Dor na coluna estÃ¡ acabando com suas noites? ğŸ˜” Nossos clientes relatam alÃ­vio a partir da primeira semana...",
    qualidade_sono:      "VocÃª merece acordar descansado! Quer conhecer o modelo que estÃ¡ ajudando milhares de pessoas a dormir profundamente?",
    colchao_gelado:      "Cansado de acordar suando? Temos tecnologia de gel de alta dissipaÃ§Ã£o + espumas certificadas...",
    colchao_novo:        "Quando o colchÃ£o afunda, a coluna sofre muito mais! Veja porque 87% dos nossos clientes trocam depois de 7+ anos...",
    preco_variacoes:     "Temos valores a partir de XXXX no PIX com desconto especial hoje! Qual tamanho vocÃª estÃ¡ procurando? ğŸ‘€",
    frete_entrega:       "Frete Ã© por nossa conta para todo Brasil no modelo principal! Prazo mÃ©dio 2-6 dias Ãºteis.",
    garantia_seguranca:  "VocÃª tem 100 noites para testar em casa + 10 anos de garantia! O risco Ã© todo nosso ğŸ˜Š",
    comparativo_marcas:  "Comparado com Ortobom/Flex/Castor nÃ³s usamos densidade 30-40% maior e camadas de conforto mais avanÃ§adas...",
    tipos_colchao:       "Pocket, molas ensacadas, visco gel, latex... qual tipo vocÃª jÃ¡ pesquisou ou prefere?",
    objecao_caro:        "Eu entendo... parece caro no comeÃ§o, mas veja o custo por noite de sono bom em 10 anos...",
    objecao_duvida:      "Normal ter dÃºvida! A maioria das pessoas sÃ³ acredita depois que experimenta as 100 noites de teste â¤ï¸",
    objecao_testar_loja: "Muita gente pensa isso... mas depois de testar 100 noites em casa, dizem que nunca mais comprariam sem esse benefÃ­cio!",
    script_padrao_ajuda: "Oi! Tudo bem? ğŸ˜Š Me conta um pouquinho: vocÃª estÃ¡ procurando colchÃ£o por causa de dor, calor, ou outro motivo?"
};
            </script>

            <script>

                
            </script>


</section>
    </main>
</body>
</html>
